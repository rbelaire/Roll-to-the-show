import { DiceOutcome } from './DiceOutcome'  // Roll once on a weighted dice table and return a single outcome. export function rollDice(table: DiceOutcome[]): DiceOutcome {   if (table.length === 0) {     throw new Error('Dice table is empty')   }    const totalWeight = table.reduce((sum, outcome) => {     return sum + outcome.weight   }, 0)    if (totalWeight <= 0) {     throw new Error('Dice table has invalid total weight')   }    const roll = Math.random() * totalWeight    let runningTotal = 0    for (const outcome of table) {     runningTotal += outcome.weight     if (roll <= runningTotal) {       return outcome     }   }    // Fallback (should never happen if weights are valid)   return table[table.length - 1] }

